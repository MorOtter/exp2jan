<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/public/css/style.css" rel="stylesheet" />

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <!-- Favicon -->
    <link rel="icon" href="/public/assets/favicon.webp" type="image/x-icon" />
    <!-- Page Title -->
    <title>Security Control Simulation System</title>
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav class="custom-navbar">
      <div class="navbar-logo">
        <a>SCSS</a>
      </div>
    </nav>

    <section class="info"></section>
      <h1>Consent Form</h1>
      <h2><b>Name of Lead Investigator:</b> Mordecai Otter</h2>
      <br />
      <p>
        I confirm that I have read the information sheet and understand that my
        participation in this project will require approximately one hour of my
        time for which I will be awarded 5 EMS course credits for taking part.
      </p>
      <p>
        I understand that participation will involve completing a cybersecurity
        data classification task and filling out a questionnaire.
      </p>
      <p>
        I understand that participation in this study is entirely voluntary and
        that I can withdraw from the study at any time without giving a reason,
        without any adverse consequences, and without loss of course credit, up
        to the point of data anonymisation.
      </p>
      <p>
        I understand that the information provided by me will be held
        anonymously, so it is not possible to trace this information back to me
        individually, who will have access to the information provided, how the
        data will be stored and what will happen to the data at the end of the
        research project. I understand that this information may be retained
        indefinitely, and the results of this research project will be written
        up and maybe published.
      </p>
      <p>
        I also understand that at the end of the study, I will be provided with
        additional information and feedback about the purpose of the study.
      </p>
      <p>
        I understand that I am free to ask any questions at any time. I am free
        to withdraw or discuss my concerns with the project supervisor:
      </p>
      <p>
        Prof. Phillip Morgan:
        <a href="mailto:morganphil@cardiff.ac.uk">morganphil@cardiff.ac.uk</a>
      </p>
      <p>
        Prof. Rob Honey:
        <a href="mailto:honey@cardiff.ac.uk">honey@cardiff.ac.uk</a>
      </p>
      <p>
        or the School of Psychology Research Ethics committee:
        <a href="mailto:psychethics@cardiff.ac.uk">psychethics@cardiff.ac.uk</a>
      </p>
      <p>
        <b
          >Please tick the required box next to each statement below as an
          electronic signature confirming your understanding and agreement.</b
        >
      </p>

      <!-- Consent form -->
      <section class="consent">
        <div class="d-flex w-100 justify-content-between">
          <input
            type="checkbox"
            class="form-check-input consent-checkbox"
            id="consent-1"
            name="consent-checkbox"
          />
          <label for="consent-1" class="form-check-label">
            I consent to participate in the study conducted by Mordecai Otter of
            Psychology, Cardiff University with the supervision of Prof. Phillip
            Morgan and Prof. Rob Honey.</label>
        </div>
        <br /><br />

        <div class="row align-items-center">
          <div class="col-12 d-flex">
            <input
              type="checkbox"
              class="form-check-input consent-checkbox me-2"
              style="margin-left: -1rem"
              id="consent-2"
              name="consent-checkbox"
            />
            <p class="mb-0">
              I confirm that I have read the information sheet on the previous
              page.
            </p>
          </div>
        </div>
        <br /><br />

        <div class="row align-items-center">
          <div class="col-12 d-flex">
            <input
              type="checkbox"
              class="form-check-input consent-checkbox me-2"
              style="margin-left: -1rem"
              id="consent-3"
              name="consent-checkbox"
            />
            <p class="mb-0">
              I confirm that I understand the information sheet and have had the
              opportunity to ask questions.
            </p>
          </div>
        </div>
        <br /><br />

        <div class="row align-items-center">
          <div class="col-12 d-flex">
            <input
              type="checkbox"
              class="form-check-input consent-checkbox me-2"
              style="margin-left: -1rem"
              id="consent-4"
              name="consent-checkbox"
            />
            <p class="mb-0">
              I understand that my participation is voluntary, and I am free to
              withdraw at any time without giving a reason and without any
              adverse consequences.
            </p>
          </div>
        </div>
        <br /><br />

        <div class="row align-items-center">
          <div class="col-12 d-flex">
            <input
              type="checkbox"
              class="form-check-input consent-checkbox me-2"
              style="margin-left: -1rem"
              id="consent-5"
              name="consent-checkbox"
            />
            <p class="mb-0">
              I consent to the processing of my personal information for the purposes explained to me.
            </p>
          </div>
        </div>
        <br /><br />

        <div class="row align-items-center">
          <div class="col-12 d-flex">
            <input
              type="checkbox"
              class="form-check-input consent-checkbox me-2"
              style="margin-left: -1rem"
              id="consent-6"
              name="consent-checkbox"
            />
            <p class="mb-0">
              I understand who will have access to my personal information, how
              the data will be stored, and what will happen to the data at the
              end of the research project.
            </p>
          </div>
        </div>
        <br /><br />

        <div class="row align-items-center">
          <div class="col-12 d-flex">
            <input
              type="checkbox"
              class="form-check-input consent-checkbox me-2"
              style="margin-left: -1rem"
              id="consent-7"
              name="consent-checkbox"
            />
            <p class="mb-0">
              I understand that after the research project, anonymised data may
              be made publicly available via a data repository.
            </p>
          </div>
        </div>
        <br /><br />

        <div class="row align-items-center">
          <div class="col-12 d-flex">
            <input
              type="checkbox"
              class="form-check-input consent-checkbox me-2"
              style="margin-left: -1rem"
              id="consent-8"
              name="consent-checkbox"
            />
            <p class="mb-0">
              I understand how the findings and results of the research project
              will be written up and published.
            </p>
          </div>
        </div>
        <br /><br />

        <!-- Gender and Age selection -->
        <form id="consent-form" action="/participant/login" method="POST">
          <div class="mb-3">
            <label for="gender" class="form-label">What is your gender?</label>
            <select class="form-select" id="gender" name="gender" required>
              <option value="">Please select</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
              <option value="prefer-not-to-say">Prefer not to say</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="age" class="form-label">What is your age?</label>
            <input
              type="text"
              class="form-control"
              id="age"
              name="age"
              placeholder="Enter age (18-99)"
              required
            />
          </div>
        </form>
      </section>
      <p><b>Thank you for participating in our research.</b></p>
      <p><b>You will receive instructions on how to receive your credits at the top of the debrief page at the end of the study.</b></p>
      <button class="btn" id="proceedToLogin">Confirm</button>
    </section>

    <script>
      // Add event listeners for consent checkboxes
      document.querySelectorAll('.consent-checkbox').forEach(checkbox => {
        checkbox.addEventListener('click', () => {
          if (checkbox.checked) {
            checkbox.parentElement.classList.remove('border-warning', 'border', 'border-2', 'border-danger');
          } else {
            checkbox.parentElement.classList.add('border-warning', 'border', 'border-2');
          }
        });
      });

      document.getElementById("proceedToLogin").addEventListener("click", (event) => {
        let isValid = true;
        
        // Check all consent checkboxes
        const consentCheckboxes = document.querySelectorAll('.consent-checkbox');
        consentCheckboxes.forEach(checkbox => {
          if (!checkbox.checked) {
            checkbox.parentElement.classList.add('border', 'border-2', 'border-danger');
            isValid = false;
          } else {
            checkbox.parentElement.classList.remove('border', 'border-2', 'border-danger');
          }
        });
        
        if (!isValid) {
          event.preventDefault();
          window.alert("Please tick all consent statements to confirm your agreement");
          return;
        }

        // Validate gender selection
        const gender = document.getElementById("gender");
        if (gender.value === "") {
          gender.classList.add("border-danger");
          event.preventDefault();
          window.alert("Please select your gender");
          return;
        }
        gender.classList.remove("border-danger");

        // Validate age input
        const age = document.getElementById("age");
        const ageValue = age.value.trim();
        const ageNum = parseInt(ageValue);
        
        if (isNaN(ageNum) || ageNum < 18 || ageNum > 99) {
          age.classList.add("border-danger");
          event.preventDefault();
          window.alert("Please enter a valid age between 18 and 99");
          return;
        }
        age.classList.remove("border-danger");

        // If all validation passes, submit the form
        const form = document.getElementById("consent-form");
        form.submit();
      });
    </script>
  </body>
</html>